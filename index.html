<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>AstroTerra - Impact Simulator</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåç</text></svg>">
  </head>
  <body>
    <!-- Add this just after <body> and before any other content -->
<div id="browser-recommendation"
     style="position:fixed; top:10px; left:50%; transform:translateX(-50%);
            z-index:1000; background:rgba(0,0,0,0.85); color:#ffffff; 
            padding:8px 24px; border-radius:8px; font-size:0.9em; 
            font-weight:bold; box-shadow:0 2px 8px #000;">
  *Chrome browser is recommended for running this simulation
</div>
    <!-- Dashboard -->
    <div id="dashboard" style="position:absolute;top:50px; bottom: 750px;right:15px; z-index:12; width:320px; background:rgba(0,0,0,0.7); color:#fff; border-radius:8px;">
      <div id="dashboard-header" style="display:flex; align-items:center; justify-content:space-between; padding:8px 12px; cursor:pointer;">
        <h4 style="margin:0;">Impact Analysis</h4>
        <button id="toggle-dashboard" title="Minimize/Expand" style="font-size:1.2em; background:none; border:none; color:#fff; cursor:pointer;">‚àí</button>
      </div>
      <div id="dashboard-content" style="padding:12px;">
      <div class="dash-item" title="Estimated size of the impact crater."><strong>Crater Radius:</strong> <span id="dash-crater">--</span> km</div>
      <div class="dash-item" title="Estimated radius of the thermal radiation zone."><strong>Thermal Zone Radius:</strong> <span id="dash-thermal">--</span> km</div>
      <div class="dash-item" title="Estimated radius of the shockwave impact zone."><strong>Shockwave Radius:</strong> <span id="dash-wind">--</span> km</div>
      <div class="dash-item" title="Estimated radius of the wind burst zone."><strong>Wind Burst Radius:</strong> <span id="dash-blast">--</span> km</div>
      <div class="dash-item" title="Number of seismic events triggered by the impact."><strong>Seismic Events Found:</strong> <span id="dash-earthquakes">--</span></div>
      <div class="dash-item" title="Type of explosion generated by the impact."><strong>Explosion type:</strong> <span id="dash-explosion-type">--</span></div>
      <div class="dash-item" title="Total impact energy released by the asteroid. In Megatons of TNT"><strong>Total Impact Energy:</strong> <span id="dash-energy">--</span> Mt TNT</div>
</div>
      </div>
    </div>

    <!-- Top Left Controls -->
    <div id="controls" 
         style="position:absolute; top:15px; left:15px; z-index:10;
                font-family:Arial,sans-serif; font-size:12px;
                background:rgba(0,0,0,0.65); color:#fff;
                padding:10px; border-radius:8px; width:400px;">

      <!-- Controls Header with Minimize Button -->
      <div id="controls-header" style="display:flex; align-items:center; justify-content:space-between; margin-bottom:10px;">
        <span style="font-weight:bold; font-size: large; text-align:center;">AstroTerra Controls</span>
        <button id="toggle-controls" title="Minimize/Expand" style="font-size:1.2em; background:none; border:none; color:#fff; cursor:pointer;">‚àí</button>
      </div>

      <!-- BEGIN WRAP ALL CONTENT BELOW IN THIS DIV -->
      <div id="controls-content">
        <!-- View Controls -->
        <div id="view-controls" style="margin-bottom:10px; text-align:center;">
          
        </div>
        <hr style="border-color:#777; margin:8px 0;">
         <!-- Asteroid -->
        <label for="asteroid-select" style="display:block; margin-bottom:4px;" title="Pick an asteroid to simulate or choose custom.">Sandbox Asteroid:</label>
        <select name="asteroids" id="asteroid-select" style="margin-bottom:10px; width:100%;"
          title="Select an asteroid for sandbox simulation.">
          <option title="Custom asteroid simulation" value="custom">Custom Asteroid</option>
          <option title="Once feared for a 2029 impact; close Earth flyby target" value="99942">99942 Apophis</option>
          <option title="Rubble-pile asteroid, sample returned to Earth" value="101955">101955 Bennu</option>
          <option title="Target of NASA‚Äôs planetary defense test" value="65803">65803 Didymos</option>
          <option title="First asteroid orbited and landed on (NEAR Shoemaker)" value="433">433 Eros</option>
          <option title="First celestial body intentionally redirected by humans" value="dimorphos">Dimorphos</option>
        </select>

         <!-- Density Slider -->
         <div style="margin-bottom:16px;">
          <div style="margin-bottom:6px; font-weight:bold;" 
               title="Asteroid density affects how difficult it is to deflect. Asteroids are categorized as icy, rocky, stony-iron, or metallic.">
            Density: <span id="densityValue">3.0</span> g/cm¬≥
          </div>
          <input type="range" id="densitySlider" min="1" max="8" step="0.1" value="3.0"
            style="width:100%; background:linear-gradient(to right,#89cff0,#deb887,#a9a9a9,#b87333); border-radius:6px;"
            title="Slide to set asteroid density (1 = icy, 8 = metallic)">
          <div style="font-size:1em; margin-top:4px; text-align:center; line-height:1.4;">
            <span style="color:#89cff0;" title="Icy or porous asteroids are easier to deflect.">Icy/Porous</span> ‚Üí 
            <span style="color:#deb887;" title="Rocky asteroids have moderate difficulty.">Rocky</span> ‚Üí 
            <span style="color:#a9a9a9;" title="Stony-iron asteroids are tougher to move.">Stony-Iron</span> ‚Üí 
            <span style="color:#b87333;" title="Metallic asteroids are hardest to deflect.">Metallic</span>
          </div>
        </div>


        <!-- Radius Slider -->
        <div style="margin-bottom:12px;">
          <div style="margin-bottom:4px;" title="Asteroid radius determines its mass and therefore impact strength. Massive asteroids are harder to deflect.">
            Radius: <span id="radiusValue">500</span> m
          </div>
          <input type="range" id="radiusSlider" min="1" max="2000" step="10" value="500" style="width:100%;"
            title="Slide to set asteroid radius (size)">
        </div>

        <hr style="border-color:#555; margin:8px 0;">

       
          
        </select>

        <!-- Mitigation -->
        <label for="mitigation-method-select" style="display:block; margin-bottom:4px;" title="Choose a method to try deflecting the asteroid.">Mitigation Method:</label>
        <select id="mitigation-method-select" style="margin-bottom:8px; width:100%;"
          title="Select a strategy for asteroid deflection. Various methods have different success rates.">
          <option value="kinetic">Kinetic Impactor (70%)</option>
          <option value="gravity">Gravity Tractor (30%)</option>
          <option value="nuclear">Nuclear Deflection (90%)</option>
        </select>
        <button id="execute-mitigation-btn" enabled
                style="margin-top:6px; padding:5px; border-radius:4px; 
                       border:1px solid #555; background:#333; color:#fff; cursor:pointer; width:100%;"
                title="Attempt to prevent the asteroid from impacting using the selected method and budget.">
          Execute Mitigation
        </button>

        <!-- Budget -->
        <label for="budget-slider" style="display:block; margin:10px 0 4px;" title="Set the budget for your mitigation strategy.">Deflection Budget:</label>
        <div style="display:flex; align-items:center; gap:6px; margin-bottom:6px;">
          <span style="color:#aaa;" title="Minimum budget ($50 million)">$50M</span>
          <input type="range" id="budget-slider" min="50" max="5000" value="500" step="50" style="flex:1;"
            title="Slide to set the mitigation budget (higher budget may increase success rate)">
          <span style="color:#aaa;" title="Maximum budget ($5 billion)">$5B</span>
        </div>
        <div id="budget-display" style="margin-bottom:6px;" title="Shows your selected mitigation budget.">
          Selected Budget: <span id="budget-value">500</span> M
        </div>
    

        <div id="mitigation-explanation" 
             style="color:#fff ; font-size:14px; line-height:1.5; 
                    background:#222; padding:10px; border-radius:6px; 
                    border:1px solid #555; margin-top:10px; white-space:pre-line;">
          Adjust the sliders and choose a strategy to see the mitigation explanation here.
        </div>
        <div style="color:#bbb; font-size:1.4em; margin-top:8px; text-align:center;">
          <em>To reset the simulation reload the page</em><br>
        </div>
        <!-- Notes Section (cleaned up and deduplicated) -->
        <div style="color:#bbb; font-size:1.1em; margin-top:8px; text-align:center;">
          <em><u>Notes:</u></em><br>
          ‚Ä¢ This is a simulation for educational purposes only.<br>
          Real-world asteroid deflection is complex and uncertain.
        </div>
        <div style="color:#bbb; font-size:1.1em; margin-top:8px; text-align:center;">
          ‚Ä¢ Asteroids shown are not to scale for presentation purposes.<br>
        </div>
        <div style="color:#bbb; font-size:1.1em; margin-top:8px; text-align:center;">
          <em>‚Ä¢ Background Seismic Activity:</em><br>
          Data pulled from USGS to show how active the area is.<br>
          (Impact events are separate from this)
        </div>
      </div>
      <!-- END WRAP -->
    </div>

    <div id="cesiumContainer" style="position:absolute; top:0; left:0; width:100vw; height:100vh; z-index:0;"></div>

    <audio id="background-music" loop>
      <source src="/background.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>

<script>
document.addEventListener('DOMContentLoaded', () => {
  switchToEarthView(); // init
});
</script>

<script>
// Minimize/expand dashboard
document.getElementById('toggle-dashboard').onclick = function() {
  const content = document.getElementById('dashboard-content');
  if (content.style.display === 'none') {
    content.style.display = '';
    this.textContent = '‚àí';
  } else {
    content.style.display = 'none';
    this.textContent = '+';
  }
};

// Minimize/expand controls
document.getElementById('toggle-controls').onclick = function() {
  const content = document.getElementById('controls-content');
  if (content.style.display === 'none') {
    content.style.display = '';
    this.textContent = '‚àí';
  } else {
    content.style.display = 'none';
    this.textContent = '+';
  }
};
</script>
